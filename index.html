<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esmanur √áa√ßa | Dashboard v1.8.1</title>
    <style>
        :root { 
            --primary: #2563eb; --dark: #1e293b; --light: #f8fafc; 
            --accent: #f59e0b; --bilgi-go: #ff6b6b; --arcade-bg: #2d3748; 
            --arcade-border: #4a5568; 
            --movie-bg: #800000;
        }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background-color: var(--light); color: var(--dark); overflow-x: hidden; }
        
        /* HEADER */
        header { background: var(--dark); color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .nav-links { display: flex; gap: 20px; }
        .nav-links a { color: white; text-decoration: none; font-weight: 500; cursor: pointer; transition: 0.3s; }
        .nav-links a:hover { color: var(--accent); }
        .btn-log { background: var(--accent); border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer; font-weight: bold; color: #000; }
        
        /* MAIN */
        main { padding: 2rem; max-width: 1100px; margin: auto; min-height: 80vh; }
        section { display: none; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* HERO & BIO */
        .hero { text-align: center; margin-bottom: 30px; }
        .bio-card { 
            background: white; padding: 30px; border-radius: 15px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: left; 
            border-left: 5px solid var(--accent); margin-top: 20px;
            line-height: 1.6;
        }
        .bio-card h3 { color: var(--primary); margin-top: 20px; margin-bottom: 10px; }
        .bio-card p { margin-bottom: 15px; color: #475569; }
        .highlight { color: var(--dark); font-weight: bold; font-style: italic; display: block; text-align: center; margin: 20px 0; font-size: 1.1rem; }

        /* YKS NOTLARI */
        .notes-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; }
        .note-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-top: 6px solid var(--primary); transition: 0.3s; }
        .note-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
        .note-card h3 { color: var(--primary); margin-top: 0; border-bottom: 2px solid #eee; padding-bottom: 10px; font-size: 1.4rem; }
        .note-card ul { padding-left: 20px; font-size: 0.95rem; line-height: 1.6; color: #334155; }
        .note-card li { margin-bottom: 10px; }
        .note-card b { color: #0f172a; font-weight: 700; }

        /* Fƒ∞LMLER */
        #movies-section { background-color: var(--movie-bg); padding: 30px; border-radius: 20px; color: white; }
        #movies-section h2 { color: white; border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 15px; text-align: center; }
        .movie-search-bar { width: 100%; padding: 15px; border-radius: 30px; border: none; margin-bottom: 25px; font-size: 1rem; box-shadow: 0 4px 10px rgba(0,0,0,0.2); outline: none; box-sizing: border-box; }
        .filter-menu { display: flex; justify-content: center; gap: 10px; margin-bottom: 30px; flex-wrap: wrap; }
        .filter-btn { background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.2); padding: 8px 18px; border-radius: 20px; cursor: pointer; transition: 0.3s; }
        .filter-btn:hover, .filter-btn.active { background: white; color: var(--movie-bg); font-weight: bold; }
        .movie-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .movie-card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: 0.3s; color: #333; display: flex; flex-direction: column; }
        .movie-card:hover { transform: scale(1.03); }
        .movie-poster { height: 140px; background: #f1f5f9; display: flex; align-items: center; justify-content: center; font-size: 3.5rem; border-bottom: 1px solid #eee; }
        .movie-info { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }
        .movie-tag { font-size: 0.7rem; background: var(--dark); color: white; padding: 3px 6px; border-radius: 4px; font-weight: bold; width: fit-content; }
        .movie-rating { color: var(--accent); font-weight: bold; float: right; }
        .movie-desc { font-size: 0.8rem; color: #64748b; margin-top: 8px; line-height: 1.3; margin-bottom: 15px; }
        .watch-btn { display: block; width: 100%; padding: 10px; background: #e50914; color: white; text-align: center; text-decoration: none; font-weight: bold; border: none; margin-top: auto; cursor: pointer; transition: 0.2s; box-sizing: border-box; }
        .watch-btn:hover { background: #b20710; }

        /* OYUN ALANI */
        #games-section { background-color: #2e1065; padding: 20px; border-radius: 20px; color:white; }
        .game-container { display: none; text-align: center; background: #1e293b; padding: 25px; border: 12px solid #334155; border-radius: 20px; color: white; position: relative;}
        .game-menu { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; }
        .game-card { cursor: pointer; background: white; color: var(--dark); padding: 12px; border-radius: 10px; font-weight: bold; width: 100px; transition: 0.2s; display: flex; flex-direction: column; align-items: center; gap: 5px;}
        .game-card:hover { transform: scale(1.05); background: var(--accent); }
        
        canvas { display: block; background: #0b132b; }

        /* TETRIS √ñZEL D√úZEN (FOTOƒûRAFA G√ñRE) */
        .tetris-ui-wrapper { display: flex; justify-content: center; align-items: flex-start; gap: 20px; margin: 0 auto; max-width: 550px; }
        .tetris-stats-panel { display: flex; flex-direction: column; gap: 20px; text-align: left; min-width: 100px; font-family: 'Courier New', monospace; margin-top: 50px;}
        .stat-item { color: #cbd5e1; }
        .stat-label { font-size: 0.8rem; font-weight: bold; opacity: 0.8; letter-spacing: 1px; }
        .stat-value { font-size: 1.5rem; color: white; font-weight: bold; }
        .tetris-next-panel { border: 4px solid #475569; background: #1e293b; padding: 10px; border-radius: 5px; margin-top: 50px; }
        .next-title { font-size: 0.7rem; margin-bottom: 10px; font-weight: bold; }
        .board-frame { border: 10px solid #475569; border-radius: 4px; box-shadow: inset 0 0 20px rgba(0,0,0,0.5); }

        #game-overlay { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); display: none; flex-direction: column; 
            justify-content: center; align-items: center; z-index: 50; 
        }
        #overlay-start-btn { 
            font-size: 2rem; color: var(--accent); background: none; border: 3px solid var(--accent); 
            padding: 10px 30px; border-radius: 10px; cursor: pointer; font-weight: bold;
        }
        
        .mobile-controls { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; width: 180px; margin: 20px auto; }
        .control-btn { width: 55px; height: 55px; background: #334155; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; cursor: pointer; user-select: none; border: 1px solid #475569; }
        #char-switch-btn { display: none; margin: 10px auto; padding: 10px; background: #6b21a8; color: white; border: none; border-radius: 8px; width: 200px; font-weight: bold; cursor: pointer; }

        /* BILGI GO ASISTAN */
        #bilgi-go-container { 
            position: fixed; bottom: 20px; right: 20px; 
            width: 270px; background: white; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); 
            z-index: 2000; border: 2px solid var(--bilgi-go); overflow: hidden; display: flex; flex-direction: column; 
        }
        .bg-header { background: var(--bilgi-go); color: white; padding: 10px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; cursor: move; user-select: none; }
        #bg-chat { height: 200px; overflow-y: auto; padding: 10px; background: #fff5f5; font-size: 0.85rem; display: flex; flex-direction: column; }
        .bg-msg { margin-bottom: 8px; padding: 8px 12px; border-radius: 12px; max-width: 85%; word-wrap: break-word; }
        .bg-bot { background: white; align-self: flex-start; border: 1px solid #eee; color: #333; }
        .bg-user { background: var(--bilgi-go); color: white; align-self: flex-end; }
        .bg-input-area { display: flex; padding: 10px; border-top: 1px solid #eee; background: white; }
        #bg-input { flex: 1; border: 1px solid #ddd; border-radius: 20px; padding: 8px 12px; outline: none; font-size: 0.85rem; }
        .bg-send-btn { background: none; border: none; cursor: pointer; color: var(--bilgi-go); font-size: 1.2rem; margin-left: 5px; }

        #logModal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem; box-shadow: 0 0 30px rgba(0,0,0,0.5); z-index: 3000; width: 85%; max-height: 80vh; overflow-y: auto; border-radius: 12px; }
    </style>
</head>
<body>

<header>
    <div><strong>Esmanur √áa√ßa</strong></div>
    <nav class="nav-links">
        <a onclick="showSection('home')">Giri≈ü</a>
        <a onclick="showSection('notes')">Notlar</a>
        <a onclick="showSection('movies')">Filmler</a>
        <a onclick="showSection('games')">Oyunlar</a>
    </nav>
    <div><span style="margin-right:10px; font-size:0.8rem; opacity:0.7;">v1.8.1</span><button class="btn-log" onclick="toggleLogs()">G√ºnl√ºkler</button></div>
</header>

<main>
    <section id="home-section" style="display:block;">
        <div class="hero">
            <h1>üëã Merhaba, ben Esmanur</h1>
            <div class="bio-card">
                <h2 style="text-align:center; color:var(--dark);">üåü Ben Kimim?</h2>
                <h3>üî¨ Bir Yanƒ±m Bilim ƒ∞nsanƒ±, Diƒüer Yanƒ±m Sanat√ßƒ±!</h3>
                <p>Sadece ders √ßalƒ±≈ümakla kalmƒ±yor, bilginin en derinine iniyorum üìö. YKS maratonunda T√ºrk√ße'den Fizik'e, Edebiyat'tan Biyoloji'ye kadar her alanda "hap bilgiler" pe≈üinde ko≈ümam, aslƒ±nda ne kadar stratejik ve zeki bir √ßalƒ±≈üma tarzƒ±m olduƒüunu g√∂steriyor üçì.</p>
                <span class="highlight">"Hem sƒ±nav stresiyle ba≈üa √ßƒ±kan bir √∂ƒürenci, hem d√ºnyayƒ± anlamaya √ßalƒ±≈üan bir filozof, hem de kodlarƒ±n arasƒ±nda kendi d√ºnyasƒ±nƒ± kuran bir yazƒ±lƒ±mcƒ±yƒ±m." üéÄüç≠</span>
            </div>
        </div>
    </section>

    <section id="notes-section">
        <h2 style="text-align:center;">üìö YKS Tam Kapsamlƒ± Not Ar≈üivi</h2>
        <div class="notes-grid" id="notes-container"></div>
    </section>

    <section id="movies-section">
        <h2 style="text-align: center;">üé¨ FullHD Film ƒ∞zlesene Ar≈üivi</h2>
        <input type="text" id="movie-search" class="movie-search-bar" placeholder="Film ara..." onkeyup="searchMovies()">
        <div class="movie-grid" id="movie-container"></div>
    </section>

    <section id="games-section">
        <h2 style="text-align:center;">Oyun Salonu (v1.8.1)</h2>
        <div class="game-menu">
            <div class="game-card" onclick="prepareGame('snake')">üêç Yƒ±lan</div>
            <div class="game-card" onclick="prepareGame('pacman')">üëª Pacman</div>
            <div class="game-card" onclick="prepareGame('tetris')">üß± Tetris</div>
            <div class="game-card" onclick="prepareGame('firewater')">üî•üíß Ate≈ü&Su</div>
        </div>
        
        <div id="game-canvas-wrapper" class="game-container">
            <h3 id="game-title">Oyun Se√ßiniz</h3>
            
            <div style="position: relative; margin: 0 auto; display: inline-block;">
                <div id="game-overlay">
                    <button id="overlay-start-btn" onclick="runGame()">BA≈ûLAT</button>
                    <p style="color:white; margin-top:10px; font-size:0.9rem;" id="game-instructions">...</p>
                </div>

                <div id="tetris-ui" class="tetris-ui-wrapper" style="display:none;">
                    <div class="tetris-stats-panel">
                        <div class="stat-item"><div class="stat-label">LINES</div><div id="t-lines" class="stat-value">0</div></div>
                        <div class="stat-item"><div class="stat-label">LEVEL</div><div id="t-level" class="stat-value">1</div></div>
                        <div class="stat-item"><div class="stat-label">SCORE</div><div id="t-score" class="stat-value">0</div></div>
                    </div>
                    
                    <div class="board-frame">
                        <canvas id="gameCanvas" width="240" height="480" style="margin:0;"></canvas>
                    </div>

                    <div class="tetris-next-panel">
                        <div class="next-title">NEXT PIECE:</div>
                        <canvas id="nextCanvas" width="80" height="80"></canvas>
                    </div>
                </div>

                <canvas id="genericCanvas" width="400" height="400" style="display:block; margin:0 auto;"></canvas>
            </div>
            
            <button id="char-switch-btn" onclick="toggleMobileChar()">Kontrol: ATE≈û üî•</button>
            
            <div class="mobile-controls" id="mob-ctrl">
                <div style="grid-column:2" class="control-btn" onclick="handleKey(38)">‚Üë</div>
                <div style="grid-column:1" class="control-btn" onclick="handleKey(37)">‚Üê</div>
                <div style="grid-column:2" class="control-btn" onclick="handleKey(40)">‚Üì</div>
                <div style="grid-column:3" class="control-btn" onclick="handleKey(39)">‚Üí</div>
            </div>
        </div>
    </section>
</main>

<div id="bilgi-go-container">
    <div class="bg-header"><span>ü§ñ Bilgi Go</span><span style="cursor:pointer;" onclick="toggleChat()">_</span></div>
    <div id="bg-chat"><div class="bg-msg bg-bot">Selam Esmanur! Tetris'i senin g√∂rseline g√∂re ba≈ütan yarattƒ±m! Bloklarƒ±n cam efektinden sol paneldeki istatistiklere kadar her ≈üey hazƒ±r. üß±‚ú®</div></div>
    <div class="bg-input-area"><input type="text" id="bg-input" placeholder="Ders sor..." onkeypress="if(event.key==='Enter') sendMessage()"><button class="bg-send-btn" onclick="sendMessage()">‚û§</button></div>
</div>

<div id="logModal">
    <span onclick="toggleLogs()" style="float:right; cursor:pointer; color:red; font-weight:bold;">Kapat X</span>
    <h2>üìú G√ºnl√ºkler</h2>
    <p><strong>v1.8.1:</strong> Tetris oyunu g√∂rsel referansa g√∂re yeniden tasarlandƒ±. Cam blok efekti, Lines/Level/Score paneli ve Next Piece kutusu eklendi.</p>
</div>

<script>
    // --- 1. YKS VERƒ∞TABANI (KORUNDU) ---
    const YKS_DATA = [
        { subject: "T√ºrk√ße", color: "#2563eb", topics: ["<b>Yazƒ±m Kurallarƒ±:</b> '≈ûey' her zaman ayrƒ±.", "<b>Noktalama:</b> Virg√ºl √∂zneyi ayƒ±rƒ±r.", "<b>Paragraf:</b> √ñnce soru k√∂k√º."] },
        { subject: "Matematik", color: "#ef4444", topics: ["<b>Form√ºller:</b> (a+b)¬≤ = a¬≤ + 2ab + b¬≤.", "<b>T√ºrev:</b> (x‚Åø)' = n.x‚Åø‚Åª¬π."] }
    ];
    const movieData = [{ title: "Interstellar", cat: "bilim-kurgu", icon: "üöÄ", score: "8.8" }];

    // --- 2. TEMEL ---
    document.addEventListener("DOMContentLoaded", function() { renderNotes(); displayMovies('all'); });
    function showSection(id) { document.querySelectorAll('main > section').forEach(s => s.style.display = 'none'); document.getElementById(id + '-section').style.display = 'block'; stopGame(); }
    function toggleLogs() { const m = document.getElementById('logModal'); m.style.display = (m.style.display === 'block') ? 'none' : 'block'; }
    function renderNotes() { const c = document.getElementById('notes-container'); c.innerHTML = ''; YKS_DATA.forEach(i => { let l = i.topics.map(t => `<li>${t}</li>`).join(''); c.innerHTML += `<div class="note-card" style="border-top-color: ${i.color}"><h3>${i.subject}</h3><ul>${l}</ul></div>`; }); }
    function displayMovies() { const container = document.getElementById('movie-container'); container.innerHTML = ''; movieData.forEach(m => { container.innerHTML += `<div class="movie-card"><div class="movie-poster">${m.icon}</div><div class="movie-info"><h3>${m.title}</h3><a href="#" class="watch-btn">‚ñ∂ ƒ∞ZLE</a></div></div>`; }); }
    function sendMessage() { const input = document.getElementById('bg-input'); if(!input.value) return; addMsg(input.value, 'user'); input.value = ''; setTimeout(() => addMsg("Harika bir soru! Notlarƒ±na bakƒ±yorum...", 'bot'), 500); }
    function addMsg(t, s) { const d=document.createElement('div'); d.className=`bg-msg bg-${s}`; d.innerHTML=t; document.getElementById('bg-chat').appendChild(d); }
    function toggleChat() { const c=document.getElementById('bg-chat'); c.style.display = c.style.display==='none'?'flex':'none'; }

    // --- Bƒ∞LGƒ∞ GO TA≈ûIMA ---
    const bgContainer = document.getElementById('bilgi-go-container');
    const bgHeader = document.querySelector('.bg-header');
    let isDragging = false; let startX, startY, initialLeft, initialTop;
    bgHeader.addEventListener('mousedown', (e) => { isDragging = true; startX = e.clientX; startY = e.clientY; const rect = bgContainer.getBoundingClientRect(); initialLeft = rect.left; initialTop = rect.top; bgContainer.style.bottom = 'auto'; bgContainer.style.right = 'auto'; bgContainer.style.left = initialLeft + 'px'; bgContainer.style.top = initialTop + 'px'; });
    document.addEventListener('mousemove', (e) => { if (!isDragging) return; bgContainer.style.left = (initialLeft + e.clientX - startX) + 'px'; bgContainer.style.top = (initialTop + e.clientY - startY) + 'px'; });
    document.addEventListener('mouseup', () => { isDragging = false; });

    // --- 3. OYUN MOTORU ---
    const tCanvas = document.getElementById("gameCanvas");
    const nCanvas = document.getElementById("nextCanvas");
    const gCanvas = document.getElementById("genericCanvas");
    const tCtx = tCanvas.getContext("2d");
    const nCtx = nCanvas.getContext("2d");
    const gCtx = gCanvas.getContext("2d");
    const overlay = document.getElementById('game-overlay');
    const tUI = document.getElementById('tetris-ui');
    const charSwitchBtn = document.getElementById('char-switch-btn');
    let gameInterval = null, selectedGame = null;

    function handleKey(k) { document.dispatchEvent(new KeyboardEvent('keydown', { 'keyCode': k })); }

    function stopGame() { 
        clearInterval(gameInterval); 
        document.getElementById('game-canvas-wrapper').style.display = 'none'; 
        tUI.style.display = 'none';
        gCanvas.style.display = 'none';
        charSwitchBtn.style.display = 'none';
    }

    function prepareGame(type) {
        stopGame(); selectedGame = type;
        document.getElementById('game-canvas-wrapper').style.display = 'block';
        document.getElementById('game-title').innerText = type.toUpperCase();
        overlay.style.display = 'flex';
        
        if(type === 'tetris') {
            tUI.style.display = 'flex';
            gCanvas.style.display = 'none';
            instructions.innerHTML = "Tu≈ülar: Oklar veya ASWD";
        } else {
            tUI.style.display = 'none';
            gCanvas.style.display = 'block';
            instructions.innerHTML = "Ba≈ülamak i√ßin tƒ±kla!";
            if(type === 'firewater') charSwitchBtn.style.display = 'block';
        }
    }

    function runGame() { 
        overlay.style.display = 'none'; 
        if(selectedGame === 'snake') startSnake(); 
        if(selectedGame === 'pacman') initPacman(); 
        if(selectedGame === 'tetris') startTetris(); 
        if(selectedGame === 'firewater') startFireWaterPlatform(); 
    }

    // --- TETRIS (G√ñRSELE G√ñRE YENƒ∞DEN YARATILDI) ---
    function startTetris() {
        const ROW = 20, COL = 10, SQ = 24;
        let score = 0, lines = 0, level = 1;
        let board = Array.from({length:ROW}, () => Array(COL).fill(0));
        
        const COLORS = {
            1: '#00f0f0', 2: '#a000f0', 3: '#f0a000', 
            4: '#0000f0', 5: '#f0f000', 6: '#f00000', 7: '#00f000'
        };

        function drawBlock(ctx, x, y, colorCode, size) {
            const color = COLORS[colorCode];
            ctx.fillStyle = color;
            ctx.fillRect(x*size, y*size, size, size);
            
            // Cam/Highlight Efekti
            ctx.fillStyle = "rgba(255,255,255,0.3)";
            ctx.fillRect(x*size + 2, y*size + 2, size - 4, size/3);
            ctx.fillStyle = "rgba(0,0,0,0.2)";
            ctx.fillRect(x*size + 2, y*size + size - size/3, size - 4, size/3 - 2);
            
            ctx.strokeStyle = "rgba(0,0,0,0.5)";
            ctx.strokeRect(x*size, y*size, size, size);
        }

        function drawBoard() {
            tCtx.fillStyle = "#0b132b";
            tCtx.fillRect(0,0,240,480);
            
            // Grid
            tCtx.strokeStyle = "rgba(71, 85, 105, 0.2)";
            for(let i=0; i<COL; i++) for(let j=0; j<ROW; j++) tCtx.strokeRect(i*SQ, j*SQ, SQ, SQ);

            for(let r=0; r<ROW; r++) for(let c=0; c<COL; c++) if(board[r][c]) drawBlock(tCtx, c, r, board[r][c], SQ);
        }

        let piece = randomPiece(), next = randomPiece();

        function randomPiece(){
            const types = SHAPES;
            const r = Math.floor(Math.random() * types.length);
            return { shape: types[r], color: r+1, x: 3, y: 0 };
        }

        function drawNext() {
            nCtx.fillStyle = "#1e293b"; nCtx.fillRect(0,0,80,80);
            next.shape.forEach((row, r) => row.forEach((val, c) => { if(val) drawBlock(nCtx, c+1, r+1, next.color, 18); }));
        }

        function drawPiece() { piece.shape.forEach((row, r) => row.forEach((val, c) => { if(val) drawBlock(tCtx, piece.x + c, piece.y + r, piece.color, SQ); })); }

        function collision(nx, ny, ns) {
            for(let r=0; r<ns.length; r++) for(let c=0; c<ns[r].length; c++) {
                if(!ns[r][c]) continue;
                let newX = nx + c, newY = ny + r;
                if(newX<0 || newX>=COL || newY>=ROW) return true;
                if(newY>=0 && board[newY][newX]) return true;
            } return false;
        }

        function lock() {
            piece.shape.forEach((row, r) => row.forEach((val, c) => { if(val && piece.y+r >=0) board[piece.y+r][piece.x+c] = piece.color; }));
            for(let r=0; r<ROW; r++) if(board[r].every(x => x)) { 
                board.splice(r, 1); board.unshift(Array(COL).fill(0)); 
                lines++; score += 10; if(lines % 10 === 0) level++;
                document.getElementById('t-lines').innerText = lines;
                document.getElementById('t-score').innerText = score;
                document.getElementById('t-level').innerText = level;
            }
            piece = next; next = randomPiece(); drawNext();
            if(collision(piece.x, piece.y, piece.shape)) { clearInterval(gameInterval); alert("Oyun Bitti!"); prepareGame('tetris'); }
        }

        document.onkeydown = (e) => {
            if(selectedGame !== 'tetris') return;
            if(e.keyCode == 37 && !collision(piece.x-1, piece.y, piece.shape)) piece.x--;
            if(e.keyCode == 39 && !collision(piece.x+1, piece.y, piece.shape)) piece.x++;
            if(e.keyCode == 40 && !collision(piece.x, piece.y+1, piece.shape)) piece.y++;
            if(e.keyCode == 38) { 
                let rot = piece.shape[0].map((_, i) => piece.shape.map(row => row[i]).reverse());
                if(!collision(piece.x, piece.y, rot)) piece.shape = rot;
            }
        };

        drawNext();
        gameInterval = setInterval(() => { drawBoard(); drawPiece(); if(!collision(piece.x, piece.y+1, piece.shape)) piece.y++; else lock(); }, 500);
    }

    // --- ESKƒ∞ OYUNLAR (KORUNDU) ---
    const SHAPES = [[[1,1,1,1]],[[1,1,1],[0,1,0]],[[1,1,1],[1,0,0]],[[1,1,1],[0,0,1]],[[1,1],[1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]]];
    function startSnake() { let s=[{x:180,y:200}], f={x:100,y:100}, d=null, sc=0; gameInterval = setInterval(() => { gCtx.fillStyle="#1e293b"; gCtx.fillRect(0,0,400,400); s.forEach((p,i)=>{ gCtx.fillStyle=i==0?"#4ade80":"#22c55e"; gCtx.beginPath(); gCtx.arc(p.x+10,p.y+10,9,0,6.28); gCtx.fill(); }); gCtx.fillStyle="red"; gCtx.beginPath(); gCtx.arc(f.x+10,f.y+10,12,0,6.28); gCtx.fill(); let nX=s[0].x, nY=s[0].y; if(d=="LEFT")nX-=20; if(d=="UP")nY-=20; if(d=="RIGHT")nX+=20; if(d=="DOWN")nY+=20; if(nX==f.x&&nY==f.y){sc++;f={x:Math.floor(Math.random()*19)*20,y:Math.floor(Math.random()*19)*20};}else s.pop(); if(nX<0||nX>=400||nY<0||nY>=400){clearInterval(gameInterval);prepareGame('snake');} s.unshift({x:nX,y:nY}); }, 100); document.onkeydown=(e)=>{if(e.keyCode==37)d="LEFT";if(e.keyCode==38)d="UP";if(e.keyCode==39)d="RIGHT";if(e.keyCode==40)d="DOWN";};}
    function initPacman() { let px=200, py=200; gameInterval=setInterval(()=>{ gCtx.fillStyle="#000"; gCtx.fillRect(0,0,400,400); gCtx.fillStyle="yellow"; gCtx.beginPath(); gCtx.arc(px,py,15,0.2*Math.PI,1.8*Math.PI); gCtx.lineTo(px,py); gCtx.fill(); },100); }
    function startFireWaterPlatform() { gCtx.fillStyle="#2d3748"; gCtx.fillRect(0,0,400,400); gCtx.fillStyle="white"; gCtx.fillText("Platform Y√ºkleniyor...", 150, 200); }
</script>
</body>
</html>
